---
id: "2024-06-05"
aliases:
  - June 5, 2024
tags:
  - daily-notes
---

# Paragonimiasis Positive/Negative Grouping

Now that the data sets have been merged (see [[2024-06-03]]), we want to split the data set into two groups: ELISA test positive, and ELISA test negative.

This is farily straightforward in pandas:
```python
positive_tests = df[df['Result_of_ELISA_test'] == 'Positive']
negative_tests = df[df['Result_of_ELISA_test'] == 'Negative']
```

This results in the data set being split into 326 positively tested patients and 12075 negatively tested patients.

### Significant Differences: Continuous Variables

We start by comparing each continuous variable. Since we split the data set into two samples, we use a two-sample t-test to test if the mean values are significantly different. The code looks as follows:

```python
from scipy.stats import ttest_ind

def perform_ttest(column):
    df_positive = positive_tests.dropna(how='any', subset=[column]).copy()
    df_negative = negative_tests.dropna(how='any', subset=[column]).copy()
    pos_mean = df_positive[column].mean()
    neg_mean  = df_negative[column].mean()
    t_stat, p_val = ttest_ind(df_positive[column], df_negative[column])

    return pd.Series({
        'Positive Mean': pos_mean,
        'Negative Mean': neg_mean,
        't-stat': t_stat,
        'p-value': p_val
    })
```
Running the code on a few columns gives the following result:

|               |   Age_of_the_study_participant |   Height_of_the_study_participant_in_Cms |   Weight_of_the_study_participant_in_Kgs |
|:--------------|-------------------------------:|-----------------------------------------:|-----------------------------------------:|
| Positive Mean |                    32.0184     |                               149.043    |                              44.2147     |
| Negative Mean |                    35.9002     |                               149.262    |                              46.8544     |
| t-stat        |                    -3.13453    |                                -0.220966 |                              -2.74948    |
| p-value       |                     0.00172535 |                                 0.825122 |                               0.00597772 |

Both Age_of_the_study_participant and Weight_of_the_study_participant_in_Kgs had a p-value under 5%.

### Significant Differences: Categorical Variables

The majority of the columns are categorical. For example the column Sex_of_the_study_participant falls into three categories:

|             |   Positive |   Negative |
|:------------|-----------:|-----------:|
| Female      |        180 |       6345 |
| Male        |        146 |       5654 |
| Transgender |          0 |          5 |

We want to know if a categorical variable (such as sex) is independent of ELISA positive/negative.

We can compare categorical data by using a [chi-squared two sample test](https://medium.com/@24littledino/two-sample-chi-square-test-in-python-b9f2db89dc2b#:~:text=Two%2Dsample%20chi%2Dsquare%20test%20examines%20whether%20two%20categorical%20variables,(under%20the%20independence%20hypothesis)) getting a p-value for each categorical answer.

The Python code is as follows:
```python
from scipy.stats import chi2_contingency

def perform_chitest(column):
    dict_pos = positive_tests[column].value_counts().to_dict()
    dict_neg = negative_tests[column].value_counts().to_dict()
    
    keys = list(set(dict_pos.keys()).union(set(dict_neg.keys())))
    keys = sorted(keys)

    res = {}
    observed = [[],[]]
    for key in keys:
        observed[0].append(dict_pos.get(key,0))
        observed[1].append(dict_neg.get(key,0))
    return chi2_contingency(observed)
```

##### Host Factors:
<table>
<thead>
<tr><th style="text-align: right;">  </th><th>Column                                               </th><th>Responses  </th><th>Positive  </th><th>Negative  </th><th>p-value             </th></tr>
</thead>
<tbody>
<tr><td style="text-align: right;"> 0</td><td>Sex_of_the_study_participant                         </td><td>Female (6525)
Male (5800)
Transgender (5)            </td><td>180
146
0           </td><td>6345
5654
5           </td><td>0.6600516932794341  </td></tr>
<tr><td style="text-align: right;"> 1</td><td>Marital_status_of_the_participant                    </td><td>Married (2635)
Married  (9244)
Unmarried (451)            </td><td>61
244
21           </td><td>2574
9000
430           </td><td>0.01654103682703828 </td></tr>
<tr><td style="text-align: right;"> 2</td><td>Religion_of_the_participant                          </td><td>Chistianity (5)
Hindu (12266)
Islam (59)            </td><td>0
325
1           </td><td>5
11941
58           </td><td>0.8420839699727036  </td></tr>
<tr><td style="text-align: right;"> 3</td><td>Belongs_to_tribal_community                          </td><td>No (12330) </td><td>326       </td><td>12004     </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;"> 4</td><td>Educational_qualification_of_the_study_participant   </td><td>Graduate/Degree/Diploma (2632)
Illiterate (3094)
Post-graduate (2511)
Secondary (4093)            </td><td>74
90
72
90           </td><td>2558
3004
2439
4003           </td><td>0.1896305167122306  </td></tr>
<tr><td style="text-align: right;"> 5</td><td>Occupation_of_the_study_participant                  </td><td>Agri. Laborer (1260)
Construction laborer (1076)
Forest products (495)
Housewife (43)
Livestock (14)
MNREGA work only (473)
Others (14)
Own cultivation (130)
Own cultivation and laborer (1952)
Private (65)
Small business/Petti/Tea shop (1016)
Student (5792)            </td><td>38
26
12
1
0
18
1
1
70
2
30
127           </td><td>1222
1050
483
42
14
455
13
129
1882
63
986
5665           </td><td>0.07118126521529632 </td></tr>
<tr><td style="text-align: right;"> 6</td><td>Which_health_facility_do_you_access_when_you_are_sick</td><td>Government (11292)
Health centers run by NGO (44)
Private (866)
Self-treatment (39)
Traditional healer (89)            </td><td>300
0
25
0
1           </td><td>10992
44
841
39
88           </td><td>0.5154638395142579  </td></tr>
<tr><td style="text-align: right;"> 7</td><td>Have_you_had_Cough                                   </td><td>No (8798)
Yes (3436)            </td><td>242
84           </td><td>8556
3352           </td><td>0.37789035913987745 </td></tr>
<tr><td style="text-align: right;"> 8</td><td>Have_you_had_Expectoration                           </td><td>No (9734)
Yes (2593)            </td><td>273
53           </td><td>9461
2540           </td><td>0.037877357849456596</td></tr>
<tr><td style="text-align: right;"> 9</td><td>Have_you_had_Chest_pain                              </td><td>No (9666)
Yes (2661)            </td><td>275
51           </td><td>9391
2610           </td><td>0.010026969615090838</td></tr>
<tr><td style="text-align: right;">10</td><td>Have_you_had_fever                                   </td><td>No (108)
Yes (12219)            </td><td>3
323           </td><td>105
11896           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">11</td><td>Have_you_lost_appetite                               </td><td>No (11032)
Yes (1295)            </td><td>300
26           </td><td>10732
1269           </td><td>0.15609852522410084 </td></tr>
<tr><td style="text-align: right;">12</td><td>Have_you_had_blood_in_sputum                         </td><td>No (12273)
Yes (54)            </td><td>326
0           </td><td>11947
54           </td><td>0.430210821210259   </td></tr>
<tr><td style="text-align: right;">13</td><td>Have_you_had_night_sweats                            </td><td>No (10530)
Yes (1797)            </td><td>282
44           </td><td>10248
1753           </td><td>0.6305612868045478  </td></tr>
<tr><td style="text-align: right;">14</td><td>Have_you_lost_weight                                 </td><td>No (11910)
Yes (396)            </td><td>315
10           </td><td>11595
386           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">15</td><td>Have_you_had_shortness_of_breath                     </td><td>No (9741)
Yes (2586)            </td><td>267
59           </td><td>9474
2527           </td><td>0.22037504598491625 </td></tr>
<tr><td style="text-align: right;">16</td><td>Have_you_had_tiredness                               </td><td>No (9594)
Yes (2733)            </td><td>252
74           </td><td>9342
2659           </td><td>0.8687320660144218  </td></tr>
<tr><td style="text-align: right;">17</td><td>Other_symptoms                                       </td><td>No (12276)
Yes (51)            </td><td>325
1           </td><td>11951
50           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">18</td><td>Have_you_taken_any_treatment_or_actions              </td><td>No (11909)
Yes (38)            </td><td>312
0           </td><td>11597
38           </td><td>0.6159132422548381  </td></tr>
<tr><td style="text-align: right;">19</td><td>Have_you_ever_been_treated_for_TB                    </td><td>No (11912)
Yes Currently on ATT (38)            </td><td>312
0           </td><td>11600
38           </td><td>0.6160488670397868  </td></tr>
<tr><td style="text-align: right;">20</td><td>Type_of_TB                                           </td><td>Pulmonary (32)
Pulmonary  (2)            </td><td>0
0           </td><td>32
2           </td><td>error               </td></tr>
</tbody>
</table>

##### Pathogen Factors:

<table>
<thead>
<tr><th style="text-align: right;">  </th><th>Column                                       </th><th>Responses        </th><th>Positive  </th><th>Negative  </th><th>p-value             </th></tr>
</thead>
<tbody>
<tr><td style="text-align: right;"> 0</td><td>Consumption_of_fresh_water_crabs             </td><td>No (5)
Yes (12325)                  </td><td>0
326           </td><td>5
11999           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;"> 1</td><td>Duration_of_consumption_of_fresh_water_crabs </td><td>1-3 years (3)
3-11 months (2)
&lt;3 months (51)
&gt;5 years (12274)                  </td><td>0
0
0
326           </td><td>3
2
51
11948           </td><td>0.6758771337543388  </td></tr>
<tr><td style="text-align: right;"> 2</td><td>Frequency_of_consumption_of_fresh_water_crabs</td><td>More than once in a week (529)
Occasionally (1172)
Once in a month (980)
Once in a week (9649)                  </td><td>18
37
19
252           </td><td>511
1135
961
9397           </td><td>0.22952043999118324 </td></tr>
<tr><td style="text-align: right;"> 3</td><td>Raw_fresh_water_crabs                        </td><td>No (11900)
Yes (430)                  </td><td>315
11           </td><td>11585
419           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;"> 4</td><td>Roasted_fresh_water_crabs                    </td><td>No (12304)
Yes (26)                  </td><td>324
2           </td><td>11980
24           </td><td>0.32006920638339187 </td></tr>
<tr><td style="text-align: right;"> 5</td><td>Smoked_fresh_water_crabs                     </td><td>No (12328)
Yes (2)                  </td><td>326
0           </td><td>12002
2           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;"> 6</td><td>Soup_fresh_water_crabs                       </td><td>No (106)
Yes (12224)                  </td><td>5
321           </td><td>101
11903           </td><td>0.3020510534208001  </td></tr>
<tr><td style="text-align: right;"> 7</td><td>Pickled_fresh_water_crabs                    </td><td>No (12330)       </td><td>326       </td><td>12004     </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;"> 8</td><td>Cooked_fresh_water_crabs                     </td><td>No (5)
Yes (9491)                  </td><td>0
260           </td><td>5
9231           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;"> 9</td><td>Consumption_of_cray_fishes                   </td><td>No (12311)
Yes (19)                  </td><td>322
4           </td><td>11989
15           </td><td>1.78890200369268e-05</td></tr>
<tr><td style="text-align: right;">10</td><td>Duration_of_consumption_of_cray_fishes       </td><td>1-3 years (18)   </td><td>3         </td><td>15        </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">11</td><td>Frequency_of_consumption_of_cray_fishes      </td><td>Occasionally (18)</td><td>3         </td><td>15        </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">12</td><td>Raw_cray_fish                                </td><td>No (12330)       </td><td>326       </td><td>12004     </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">13</td><td>Roasted_cray_fish                            </td><td>No (12330)       </td><td>326       </td><td>12004     </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">14</td><td>Smoked_cray_fish                             </td><td>No (12330)       </td><td>326       </td><td>12004     </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">15</td><td>Soup_cray_fish                               </td><td>No (12310)
Yes (20)                  </td><td>325
1           </td><td>11985
19           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">16</td><td>Pickled_cray_fish                            </td><td>No (12330)       </td><td>326       </td><td>12004     </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">17</td><td>Cooked_cray_fish                             </td><td>No (12330)       </td><td>326       </td><td>12004     </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">18</td><td>Consumption_of_wlid_boar_meat                </td><td>No (12298)
Yes (32)                  </td><td>323
3           </td><td>11975
29           </td><td>0.06804177212239208 </td></tr>
<tr><td style="text-align: right;">19</td><td>Duration_of_consumption_of_wild_boar_meat    </td><td>1-3 years (1)
3-11 months (1)
&lt;3 months (1)
&gt;5 years (32)                  </td><td>0
0
0
3           </td><td>1
1
1
29           </td><td>0.9585895848817743  </td></tr>
<tr><td style="text-align: right;">20</td><td>Frequency_of_consumption_of_wild_boar_meat   </td><td>Occasionally (34)
Once in a month (1)                  </td><td>3
0           </td><td>31
1           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">21</td><td>Raw_wild_boar_meat                           </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">22</td><td>Roasted_wild_boar_meat                       </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">23</td><td>Smoked_wild_boar_meat                        </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">24</td><td>Soup_wild_boar_meat                          </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">25</td><td>Pickled_wild_boar_meat                       </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">26</td><td>Cooked_wild_boar_meat                        </td><td>No (9493)
Yes (3)                  </td><td>260
0           </td><td>9233
3           </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">27</td><td>Consumption_of_Rodents_Rats_etc              </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">28</td><td>Duration_of_consumption_of_rodents           </td><td>                 </td><td>          </td><td>          </td><td>error               </td></tr>
<tr><td style="text-align: right;">29</td><td>Frequency_of_consumption_of_rodents          </td><td>                 </td><td>          </td><td>          </td><td>error               </td></tr>
<tr><td style="text-align: right;">30</td><td>Raw_rodents                                  </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">31</td><td>Roasted_rodents                              </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">32</td><td>Smoked_rodents                               </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">33</td><td>Soup_rodents                                 </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">34</td><td>Pickled_rodents                              </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
<tr><td style="text-align: right;">35</td><td>Cooked_rodents                               </td><td>No (9496)        </td><td>260       </td><td>9236      </td><td>1.0                 </td></tr>
</tbody>
</table>

