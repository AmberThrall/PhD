---
id: "2024-06-05"
aliases:
  - June 5, 2024
tags:
  - daily-notes
---

# Paragonimiasis Positive/Negative Grouping

Now that the data sets have been merged (see [[2024-06-03]]), we want to split the data set into two groups: ELISA test positive, and ELISA test negative.

This is farily straightforward in pandas:
```python
positive_tests = df[df['Result_of_ELISA_test'] == 'Positive']
negative_tests = df[df['Result_of_ELISA_test'] == 'Negative']
```

This results in the data set being split into 326 positively tested patients and 12075 negatively tested patients.

### Significant Differences: Continuous Variables

We start by comparing each continuous variable. Since we split the data set into two samples, we use a two-sample t-test to test if the mean values are significantly different. The code looks as follows:

```python
from scipy.stats import ttest_ind

def perform_ttest(column):
    df_positive = positive_tests.dropna(how='any', subset=[column]).copy()
    df_negative = negative_tests.dropna(how='any', subset=[column]).copy()
    pos_mean = df_positive[column].mean()
    neg_mean  = df_negative[column].mean()
    t_stat, p_val = ttest_ind(df_positive[column], df_negative[column])

    return pd.Series({
        'Positive Mean': pos_mean,
        'Negative Mean': neg_mean,
        't-stat': t_stat,
        'p-value': p_val
    })
```
Running the code on a few columns gives the following result:

|               |   Age_of_the_study_participant |   Height_of_the_study_participant_in_Cms |   Weight_of_the_study_participant_in_Kgs |
|:--------------|-------------------------------:|-----------------------------------------:|-----------------------------------------:|
| Positive Mean |                    32.0184     |                               149.043    |                              44.2147     |
| Negative Mean |                    35.9002     |                               149.262    |                              46.8544     |
| t-stat        |                    -3.13453    |                                -0.220966 |                              -2.74948    |
| p-value       |                     0.00172535 |                                 0.825122 |                               0.00597772 |

Both Age_of_the_study_participant and Weight_of_the_study_participant_in_Kgs had a p-value under 5%.

### Significant Differences: Categorical Variables

The majority of the columns are categorical. For example the column Sex_of_the_study_participant falls into three categories:

|             |   Positive |   Negative |
|:------------|-----------:|-----------:|
| Female      |        180 |       6345 |
| Male        |        146 |       5654 |
| Transgender |          0 |          5 |

We want to know if a categorical variable (such as sex) is independent of ELISA positive/negative.

We can compare categorical data by using a [chi-squared two sample test](https://medium.com/@24littledino/two-sample-chi-square-test-in-python-b9f2db89dc2b#:~:text=Two%2Dsample%20chi%2Dsquare%20test%20examines%20whether%20two%20categorical%20variables,(under%20the%20independence%20hypothesis)) getting a p-value for each categorical answer.

The Python code is as follows:
```python
from scipy.stats import chi2_contingency

def perform_chitest(column):
    dict_pos = positive_tests[column].value_counts().to_dict()
    dict_neg = negative_tests[column].value_counts().to_dict()
    
    keys = list(set(dict_pos.keys()).union(set(dict_neg.keys())))
    keys = sorted(keys)

    observed = [[],[]]
    for key in keys:
        observed[0].append(dict_pos.get(key,0))
        observed[1].append(dict_neg.get(key,0))
    return chi2_contingency(observed)
```

##### Host Factors:
Columns with <5% p-value: 
- Marital_status_of_the_participant 
- Have_you_had_Expectoration
- Have_you_had_Chest_pain

**Sex_of_the_study_participant**
p-value: 0.6600516932794341

|             |   Positive |   Negative |
|-------------|------------|------------|
| Female      |        180 |       6345 |
| Male        |        146 |       5654 |
| Transgender |          0 |          5 |


**Marital_status_of_the_participant**
p-value: 0.010338783754939688

|           |   Positive |   Negative |
|-----------|------------|------------|
| Married   |        305 |      11574 |
| Unmarried |         21 |        430 |


**Religion_of_the_participant**
p-value: 0.8420839699727036

|             |   Positive |   Negative |
|-------------|------------|------------|
| Chistianity |          0 |          5 |
| Hindu       |        325 |      11941 |
| Islam       |          1 |         58 |


**Belongs_to_tribal_community**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        326 |      12004 |


**Educational_qualification_of_the_study_participant**
p-value: 0.1896305167122306

|                         |   Positive |   Negative |
|-------------------------|------------|------------|
| Graduate/Degree/Diploma |         74 |       2558 |
| Illiterate              |         90 |       3004 |
| Post-graduate           |         72 |       2439 |
| Secondary               |         90 |       4003 |


**Occupation_of_the_study_participant**
p-value: 0.07118126521529632

|                               |   Positive |   Negative |
|-------------------------------|------------|------------|
| Agri. Laborer                 |         38 |       1222 |
| Construction laborer          |         26 |       1050 |
| Forest products               |         12 |        483 |
| Housewife                     |          1 |         42 |
| Livestock                     |          0 |         14 |
| MNREGA work only              |         18 |        455 |
| Others                        |          1 |         13 |
| Own cultivation               |          1 |        129 |
| Own cultivation and laborer   |         70 |       1882 |
| Private                       |          2 |         63 |
| Small business/Petti/Tea shop |         30 |        986 |
| Student                       |        127 |       5665 |


**Which_health_facility_do_you_access_when_you_are_sick**
p-value: 0.5154638395142579

|                           |   Positive |   Negative |
|---------------------------|------------|------------|
| Government                |        300 |      10992 |
| Health centers run by NGO |          0 |         44 |
| Private                   |         25 |        841 |
| Self-treatment            |          0 |         39 |
| Traditional healer        |          1 |         88 |


**Have_you_had_Cough**
p-value: 0.37789035913987745

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        242 |       8556 |
| Yes |         84 |       3352 |


**Have_you_had_Expectoration**
p-value: 0.037877357849456596

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        273 |       9461 |
| Yes |         53 |       2540 |


**Have_you_had_Chest_pain**
p-value: 0.010026969615090838

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        275 |       9391 |
| Yes |         51 |       2610 |


**Have_you_had_fever**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |          3 |        105 |
| Yes |        323 |      11896 |


**Have_you_lost_appetite**
p-value: 0.15609852522410084

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        300 |      10732 |
| Yes |         26 |       1269 |


**Have_you_had_blood_in_sputum**
p-value: 0.430210821210259

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        326 |      11947 |
| Yes |          0 |         54 |


**Have_you_had_night_sweats**
p-value: 0.6305612868045478

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        282 |      10248 |
| Yes |         44 |       1753 |


**Have_you_lost_weight**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        315 |      11595 |
| Yes |         10 |        386 |


**Have_you_had_shortness_of_breath**
p-value: 0.22037504598491625

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        267 |       9474 |
| Yes |         59 |       2527 |


**Have_you_had_tiredness**
p-value: 0.8687320660144218

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        252 |       9342 |
| Yes |         74 |       2659 |


**Other_symptoms**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        325 |      11951 |
| Yes |          1 |         50 |


**Have_you_taken_any_treatment_or_actions**
p-value: 0.6159132422548381

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        312 |      11597 |
| Yes |          0 |         38 |


**Have_you_ever_been_treated_for_TB**
p-value: 0.6160488670397868

|                      |   Positive |   Negative |
|----------------------|------------|------------|
| No                   |        312 |      11600 |
| Yes Currently on ATT |          0 |         38 |


**Type_of_TB**
p-value: error

|           |   Positive |   Negative |
|-----------|------------|------------|
| Pulmonary |          0 |         34 |

##### Pathogen Factors:
Columns with <5% p-value: 
- Consumption_of_cray_fishes

**Consumption_of_fresh_water_crabs**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |          0 |          5 |
| Yes |        326 |      11999 |


**Duration_of_consumption_of_fresh_water_crabs**
p-value: 0.6758771337543388

|             |   Positive |   Negative |
|-------------|------------|------------|
| 1-3 years   |          0 |          3 |
| 3-11 months |          0 |          2 |
| <3 months   |          0 |         51 |
| >5 years    |        326 |      11948 |


**Frequency_of_consumption_of_fresh_water_crabs**
p-value: 0.22952043999118324

|                          |   Positive |   Negative |
|--------------------------|------------|------------|
| More than once in a week |         18 |        511 |
| Occasionally             |         37 |       1135 |
| Once in a month          |         19 |        961 |
| Once in a week           |        252 |       9397 |


**Raw_fresh_water_crabs**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        315 |      11585 |
| Yes |         11 |        419 |


**Roasted_fresh_water_crabs**
p-value: 0.32006920638339187

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        324 |      11980 |
| Yes |          2 |         24 |


**Smoked_fresh_water_crabs**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        326 |      12002 |
| Yes |          0 |          2 |


**Soup_fresh_water_crabs**
p-value: 0.3020510534208001

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |          5 |        101 |
| Yes |        321 |      11903 |


**Pickled_fresh_water_crabs**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        326 |      12004 |


**Cooked_fresh_water_crabs**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |          0 |          5 |
| Yes |        260 |       9231 |


**Consumption_of_cray_fishes**
p-value: 1.78890200369268e-05

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        322 |      11989 |
| Yes |          4 |         15 |


**Duration_of_consumption_of_cray_fishes**
p-value: 1.0

|           |   Positive |   Negative |
|-----------|------------|------------|
| 1-3 years |          3 |         15 |


**Frequency_of_consumption_of_cray_fishes**
p-value: 1.0

|              |   Positive |   Negative |
|--------------|------------|------------|
| Occasionally |          3 |         15 |


**Raw_cray_fish**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        326 |      12004 |


**Roasted_cray_fish**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        326 |      12004 |


**Smoked_cray_fish**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        326 |      12004 |


**Soup_cray_fish**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        325 |      11985 |
| Yes |          1 |         19 |


**Pickled_cray_fish**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        326 |      12004 |


**Cooked_cray_fish**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        326 |      12004 |


**Consumption_of_wlid_boar_meat**
p-value: 0.06804177212239208

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        323 |      11975 |
| Yes |          3 |         29 |


**Duration_of_consumption_of_wild_boar_meat**
p-value: 0.9585895848817743

|             |   Positive |   Negative |
|-------------|------------|------------|
| 1-3 years   |          0 |          1 |
| 3-11 months |          0 |          1 |
| <3 months   |          0 |          1 |
| >5 years    |          3 |         29 |


**Frequency_of_consumption_of_wild_boar_meat**
p-value: 1.0

|                 |   Positive |   Negative |
|-----------------|------------|------------|
| Occasionally    |          3 |         31 |
| Once in a month |          0 |          1 |


**Raw_wild_boar_meat**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Roasted_wild_boar_meat**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Smoked_wild_boar_meat**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Soup_wild_boar_meat**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Pickled_wild_boar_meat**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Cooked_wild_boar_meat**
p-value: 1.0

|     |   Positive |   Negative |
|-----|------------|------------|
| No  |        260 |       9233 |
| Yes |          0 |          3 |


**Consumption_of_Rodents_Rats_etc**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Duration_of_consumption_of_rodents**
p-value: error

| Positive   | Negative   |
|------------|------------|


**Frequency_of_consumption_of_rodents**
p-value: error

| Positive   | Negative   |
|------------|------------|


**Raw_rodents**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Roasted_rodents**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Smoked_rodents**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Soup_rodents**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Pickled_rodents**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |


**Cooked_rodents**
p-value: 1.0

|    |   Positive |   Negative |
|----|------------|------------|
| No |        260 |       9236 |
